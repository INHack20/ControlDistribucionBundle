<style>
		.diagolo { font-size: 72.5%; }
		
		input.text { margin-bottom:12px; width:95%; padding: .4em; }
                .validateTips { border: 1px solid transparent; padding: 0.3em; }
                
                
                
</style>
	<script>
	$(function() {
                
                $( "#dialog:ui-dialog" ).dialog( "destroy" );
		
		var f_desde = $( "#f_desde" ),
			f_hasta = $( "#f_hasta" ),
			allFields = $( [] ).add( f_desde ).add( f_hasta ),
			tips = $( ".validateTips" );

		function updateTips( t ) {
			tips
				.text( t )
				.addClass( "ui-state-highlight" );
			setTimeout(function() {
				tips.removeClass( "ui-state-highlight", 1500 );
			}, 500 );
		}

		function checkLength( o, n, min, max ) {
			if ( o.val().length > max || o.val().length < min ) {
				o.addClass( "ui-state-error" );
				updateTips( "Ingrese una fecha valida.(yyyy-mm-dd)");
				return false;
			} else {
				return true;
			}
		}
                
                
                var id = "";
		$( "#dialog-form" ).dialog({
			autoOpen: false,
			height: 335,
			width: 350,
			modal: true,
                        show: "blind",
			//hide: "blind",
			buttons: {
				"Consultar": function() {
                                    var f_desde = $("#f_desde");
                                    var f_hasta = $("#f_hasta");
                                    var detallada = $("#"+id).attr("detallada");
                                    var idtp = $("#"+id).attr("idtp");
                                    
                                    var bValid = true;
					allFields.removeClass( "ui-state-error" );
                                        
                                    bValid = bValid && checkLength( f_desde, "Fecha Inico", 10, 10 );
                                    bValid = bValid && checkLength( f_hasta, "Fecha Fin", 10, 10 );
                                    
                                    if ( bValid ) {
                                        route = Routing.generate($("#"+id).attr("route"),{ "id" : idtp ,"f_desde" : f_desde.val(), "f_hasta" : f_hasta.val(), "detallada" : detallada });
                                        document.location.href = route;
                                        $( this ).dialog( "close" );
                                    }
                                    
                                  
				},
				Cancelar: function() {
					$( this ).dialog( "close" );
				}
			},
			close: function() {
				
			}
		});
                
                //Dialogos
		$( ".consulta" )
			//.button()
			.click(function() {
                            id = $(this).attr('id');
                            $( "#dialog-form" ).dialog( "open" ,$(this) );
			});
                        
                $( "#f_desde" ).datepicker({
                    showOn: "button",
                    buttonImage: "{{ asset('bundles/inhack20controldistribucion/images/icono_calendario.gif') }}",
                    buttonImageOnly: true,
                    showOtherMonths: true,
                    selectOtherMonths: true,
                    dateFormat: "yy-mm-dd",
                    //defaultDate: "-1w",
                    changeMonth: true,
                    numberOfMonths: 1,
                    onSelect: function( selectedDate ) {
                            $( "#f_hasta" ).datepicker( "option", "minDate", selectedDate );
                    }
		});
		$( "#f_hasta" ).datepicker({
                    showOn: "button",
                    buttonImage: "{{ asset('bundles/inhack20controldistribucion/images/icono_calendario.gif') }}",
                    buttonImageOnly: true,
                    showOtherMonths: true,
                    selectOtherMonths: true,
                    dateFormat: "yy-mm-dd",
                    //defaultDate: "+1w",
                    changeMonth: true,
                    numberOfMonths: 1,
                    onSelect: function( selectedDate ) {
                            $( "#f_desde" ).datepicker( "option", "maxDate", selectedDate );
                    }
		});
	});
	</script>

<div id="dialog-form" class="diagolo" title="Consultar por fechas">
        <br/>
        <p class="validateTips" style="margin-left: 30px">Todos los campos son requeridos.</p>
	<fieldset style="margin:5%">
                <legend>Consultar</legend>
                <form>
                    <table style="margin:25px" cellspacing="5px" cellpading="5px" cellspacing="2">
                        <tr>
                            <td>
                                <label for="f_desde">Desde</label>&nbsp;&nbsp;
                            </td>
                            <td>
                                <input type="text" id="f_desde" style="position: relative " name="f_desde" class="ui-widget-content ui-corner-all" />
                                <br/><br/><br/>
                            </td>
                        </tr>
                        <tr>
                            <td>
                                <label for="f_hasta">Hasta</label>&nbsp;&nbsp;
                            </td>
                            <td>
                                <input type="text" id="f_hasta" name="f_hasta" class="ui-widget-content ui-corner-all" />
                            </td>
                        </tr>
                        
                    </table>
                </form>
        </fieldset>
</div>